<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Euro Coin Tracker</title>
    
    <!-- Load Tailwind CSS for styling (Version Frozen to 3.4.3) -->
    <script src="https://cdn.tailwindcss.com/3.4.3"></script>
    
    <!-- Load Lucide Icons for the graphics (Version Frozen to 0.344.0) -->
    <script src="https://unpkg.com/lucide@0.344.0"></script>

    <style>
        /* Custom scrollbar and minor tweaks */
        body { font-family: system-ui, -apple-system, sans-serif; }
        .coin-card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .coin-card:hover { transform: translateY(-8px); }
    </style>
</head>
<body class="min-h-screen bg-slate-50 pb-16">

    <!-- Header Dashboard -->
    <header class="bg-slate-900 text-white pt-10 pb-10 px-4 sm:px-6 md:px-8 rounded-b-[2.5rem] shadow-2xl relative overflow-hidden border-b-4 border-yellow-500">
        <!-- Background decoration -->
        <div class="absolute top-0 right-0 opacity-5 pointer-events-none transform translate-x-1/4 -translate-y-1/4">
            <i data-lucide="circle" class="w-[500px] h-[500px]" stroke-width="8"></i>
        </div>
        
        <div class="max-w-7xl mx-auto relative z-10">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-10 gap-4">
                <div>
                    <h1 class="text-3xl md:text-5xl font-extrabold flex items-center gap-3 tracking-tight">
                        <i data-lucide="euro" class="text-yellow-400 drop-shadow-md w-10 h-10"></i>
                        Euro Collector
                    </h1>
                    <p class="text-slate-400 mt-2 text-md md:text-lg font-medium">Your personal 2â‚¬ tracking dashboard</p>
                </div>
                
                <div class="flex flex-col sm:items-end gap-3 w-full sm:w-auto">
                    <!-- Total Value Badge -->
                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-400 text-yellow-950 px-5 py-2.5 rounded-2xl shadow-lg font-black text-2xl flex items-center justify-center gap-2 border-2 border-yellow-300 w-full sm:w-auto transform transition-transform hover:scale-105" title="Total Face Value of Collected Coins">
                        <i data-lucide="wallet" class="w-6 h-6 opacity-80"></i>
                        <span id="total-value">â‚¬0.00</span>
                    </div>
                    <button onclick="resetCollection()" class="bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold py-2 px-4 rounded-xl shadow-md transition-all flex items-center justify-center gap-2 text-sm border border-slate-700 w-full sm:w-auto">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                        Reset Progress
                    </button>
                </div>
            </div>

            <!-- Dual Progress Stats -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- Global & Regular Stats -->
                <div class="bg-white/10 backdrop-blur-md border border-white/10 rounded-3xl p-6 shadow-inner relative overflow-hidden">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-slate-300 font-bold text-sm uppercase tracking-wider flex items-center gap-2">
                            <i data-lucide="globe" class="text-blue-400 w-4 h-4"></i>
                            Eurozone Standard Coins
                        </div>
                        <i data-lucide="award" id="reg-award" class="text-yellow-400 animate-pulse hidden w-6 h-6"></i>
                    </div>
                    <div class="flex items-end gap-3 mb-4">
                        <div class="text-5xl font-black text-white" id="reg-collected">0</div>
                        <div class="text-xl text-slate-400 font-medium mb-1">/ <span id="reg-total">0</span></div>
                    </div>
                    <div class="w-full bg-slate-800 rounded-full h-3 overflow-hidden shadow-inner">
                        <div id="reg-bar" class="bg-blue-500 h-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Slovenian Stats (Themed!) -->
                <div class="bg-white/10 backdrop-blur-md border border-white/10 rounded-3xl p-6 shadow-inner relative overflow-hidden">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-slate-300 font-bold text-sm uppercase tracking-wider flex items-center gap-2">
                            <i data-lucide="star" class="text-yellow-400 w-4 h-4"></i>
                            Slovenian Commemoratives
                        </div>
                        <i data-lucide="trophy" id="sl-award" class="text-yellow-400 animate-pulse hidden w-6 h-6"></i>
                    </div>
                    <div class="flex items-end gap-3 mb-4">
                        <div class="text-5xl font-black text-white" id="sl-collected">0</div>
                        <div class="text-xl text-slate-400 font-medium mb-1">/ <span id="sl-total">0</span></div>
                    </div>
                    <!-- Slovenian Flag Themed Progress Bar -->
                    <div class="w-full bg-slate-800 rounded-full h-3 overflow-hidden shadow-inner flex">
                        <div id="sl-bar-white" class="bg-white h-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                        <div id="sl-bar-blue" class="bg-blue-500 h-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                        <div id="sl-bar-red" class="bg-red-500 h-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                    </div>
                </div>

            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-8">
        
        <!-- Universal Search & Filters -->
        <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-200 mb-10 flex flex-col md:flex-row gap-4 sticky top-4 z-40 backdrop-blur-md bg-white/90">
            <div class="flex-1 relative">
                <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
                <input 
                    type="text" 
                    id="searchInput"
                    placeholder="Search by title, year, or country..." 
                    class="w-full pl-12 pr-4 py-3 bg-slate-100 border-none rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all font-medium text-slate-700"
                />
            </div>
            <div class="flex gap-4">
                <select 
                    id="statusFilter"
                    class="px-5 py-3 bg-slate-100 border-none rounded-xl outline-none focus:ring-2 focus:ring-blue-500 font-medium text-slate-700 cursor-pointer min-w-[160px]"
                >
                    <option value="All">All Coins</option>
                    <option value="Collected">Collected</option>
                    <option value="Missing">Missing</option>
                </select>
            </div>
        </div>

        <!-- SECTION 1: Regular Eurozone Coins -->
        <section class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="p-3 bg-blue-100 text-blue-600 rounded-xl">
                    <i data-lucide="globe" class="w-6 h-6"></i>
                </div>
                <div>
                    <h2 class="text-2xl font-black text-slate-800 tracking-tight">Eurozone Standard Issues</h2>
                    <p class="text-slate-500 font-medium text-sm">The 24 regular national circulation coins</p>
                </div>
                <span id="reg-complete-badge" class="hidden ml-auto bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1">
                    <i data-lucide="check-circle" class="w-4 h-4"></i> Complete
                </span>
            </div>

            <div id="regular-coins-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6">
                <!-- Coins generated by JavaScript -->
            </div>
        </section>

        <!-- SECTION 2: Slovenian Commemoratives -->
        <section class="mb-10">
            <div class="flex items-center gap-3 mb-6">
                <div class="p-3 bg-blue-100 text-blue-800 rounded-xl relative overflow-hidden">
                    <div class="absolute inset-0 flex flex-col opacity-20">
                        <div class="h-1/3 bg-white"></div><div class="h-1/3 bg-blue-600"></div><div class="h-1/3 bg-red-600"></div>
                    </div>
                    <i data-lucide="star" class="w-6 h-6 relative z-10"></i>
                </div>
                <div>
                    <h2 class="text-2xl font-black text-slate-800 tracking-tight">Slovenian Commemoratives</h2>
                    <p class="text-slate-500 font-medium text-sm">Special issues from 2007 to 2026</p>
                </div>
                <span id="sl-complete-badge" class="hidden ml-auto bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1">
                    <i data-lucide="check-circle" class="w-4 h-4"></i> Complete
                </span>
            </div>

            <div id="slovenian-coins-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6">
                <!-- Coins generated by JavaScript -->
            </div>
        </section>

    </main>

    <!-- JavaScript Application Logic -->
    <script>
        // --- 1. DATASET ---
        const COINS = [
            // REGULAR COINS
            { id: 'reg-ad', type: 'Regular', year: 'Standard', country: 'Andorra', inscription: 'ANDORRA', flag: 'ðŸ‡¦ðŸ‡©', title: 'Standard 2â‚¬ - Coat of Arms', icon: 'landmark', imageUrl: 'https://upload.wikimedia.org/wikipedia/en/thumb/0/0a/Andorra_2_euro_coin.png/200px-Andorra_2_euro_coin.png', description: 'Features the coat of arms of Andorra with the national motto "virtus unita fortior" (virtue united is stronger).' },
            { id: 'reg-at', type: 'Regular', year: 'Standard', country: 'Austria', inscription: 'Ã–STERREICH', flag: 'ðŸ‡¦ðŸ‡¹', title: 'Standard 2â‚¬ - Bertha von Suttner', icon: 'user', imageUrl: 'https://upload.wikimedia.org/wikipedia/en/thumb/1/14/Austria_2_euro_coin.png/200px-Austria_2_euro_coin.png', description: 'Features a portrait of Bertha von Suttner, Nobel Peace Prize laureate, symbolizing Austria\'s historical commitment to peace.' },
            { id: 'reg-be', type: 'Regular', year: 'Standard', country: 'Belgium', inscription: 'BELGIE', flag: 'ðŸ‡§ðŸ‡ª', title: 'Standard 2â‚¬ - King Philippe', icon: 'user', description: 'Features the effigy of King Philippe of Belgium in profile looking to the right, along with his royal monogram.' },
            { id: 'reg-hr', type: 'Regular', year: 'Standard', country: 'Croatia', inscription: 'HRVATSKA', flag: 'ðŸ‡­ðŸ‡·', title: 'Standard 2â‚¬ - Map of Croatia', icon: 'map', description: 'Features the geographical map of the Republic of Croatia superimposed against a background of the national checkerboard pattern.' },
            { id: 'reg-cy', type: 'Regular', year: 'Standard', country: 'Cyprus', inscription: 'KYÐŸPOÎ£', flag: 'ðŸ‡¨ðŸ‡¾', title: 'Standard 2â‚¬ - Idol of Pomos', icon: 'user', description: 'Features a cross-shaped idol from the Chalcolithic period (3000 BC) found in Pomos, a characteristic example of prehistoric Cypriot art.' },
            { id: 'reg-ee', type: 'Regular', year: 'Standard', country: 'Estonia', inscription: 'EESTI', flag: 'ðŸ‡ªðŸ‡ª', title: 'Standard 2â‚¬ - Map of Estonia', icon: 'map', description: 'Features a geographical map of Estonia in outline, symbolizing national unity and identity.' },
            { id: 'reg-fi', type: 'Regular', year: 'Standard', country: 'Finland', inscription: 'SUOMI', flag: 'ðŸ‡«ðŸ‡®', title: 'Standard 2â‚¬ - Cloudberry', icon: 'map', description: 'Features the fruit and leaves of the cloudberry, designed by Raimo Heino, representing Finland\'s distinct northern nature.' },
            { id: 'reg-fr', type: 'Regular', year: 'Standard', country: 'France', inscription: 'RF', flag: 'ðŸ‡«ðŸ‡·', title: 'Standard 2â‚¬ - Tree of Life', icon: 'map', description: 'Features a tree drawn by Joaquin Jimenez, symbolizing life, continuity, and growth, contained within a hexagon representing France\'s borders.' },
            { id: 'reg-de', type: 'Regular', year: 'Standard', country: 'Germany', inscription: 'BUNDESREP.', flag: 'ðŸ‡©ðŸ‡ª', title: 'Standard 2â‚¬ - Eagle', icon: 'bird', description: 'Features the traditional symbol of German sovereignty, the heraldic eagle, surrounded by the stars of Europe.' },
            { id: 'reg-gr', type: 'Regular', year: 'Standard', country: 'Greece', inscription: 'Î•Î›Î›Î—ÎÎ™ÎšÎ—', flag: 'ðŸ‡¬ðŸ‡·', title: 'Standard 2â‚¬ - Europa and the Bull', icon: 'user', description: 'Depicts a scene from Spartan mythology where Europa is being abducted by Zeus, who has taken the form of a bull.' },
            { id: 'reg-ie', type: 'Regular', year: 'Standard', country: 'Ireland', inscription: 'Ã‰IRE', flag: 'ðŸ‡®ðŸ‡ª', title: 'Standard 2â‚¬ - Celtic Harp', icon: 'music', description: 'Features the Celtic harp, a traditional symbol of Ireland dating back centuries, alongside the word "Ã‰ire".' },
            { id: 'reg-it', type: 'Regular', year: 'Standard', country: 'Italy', inscription: 'RI', flag: 'ðŸ‡®ðŸ‡¹', title: 'Standard 2â‚¬ - Dante Alighieri', icon: 'user', description: 'Features a portrait drawn by Raphael of Dante Alighieri, the famous Italian poet and author of the Divine Comedy.' },
            { id: 'reg-lv', type: 'Regular', year: 'Standard', country: 'Latvia', inscription: 'LATVIJA', flag: 'ðŸ‡±ðŸ‡»', title: 'Standard 2â‚¬ - Latvian Maiden', icon: 'user', description: 'Features the profile of a Latvian maiden, originally used on the 5-lats silver coin in 1929, symbolizing the Republic of Latvia.' },
            { id: 'reg-lt', type: 'Regular', year: 'Standard', country: 'Lithuania', inscription: 'LIETUVA', flag: 'ðŸ‡±ðŸ‡¹', title: 'Standard 2â‚¬ - Vytis (Knight)', icon: 'swords', description: 'Features Vytis, the heroic knight on horseback holding a sword and shield, which is the historical coat of arms of Lithuania.' },
            { id: 'reg-lu', type: 'Regular', year: 'Standard', country: 'Luxembourg', inscription: 'LÃ‹TZEBUERG', flag: 'ðŸ‡±ðŸ‡º', title: 'Standard 2â‚¬ - Grand Duke Henri', icon: 'user', description: 'Features the effigy of His Royal Highness, Grand Duke Henri, looking to the right.' },
            { id: 'reg-mt', type: 'Regular', year: 'Standard', country: 'Malta', inscription: 'MALTA', flag: 'ðŸ‡²ðŸ‡¹', title: 'Standard 2â‚¬ - Maltese Cross', icon: 'landmark', description: 'Features the eight-pointed Maltese Cross, an emblem associated with the Sovereign Military Order of Malta during their rule.' },
            { id: 'reg-mc', type: 'Regular', year: 'Standard', country: 'Monaco', inscription: 'MONACO', flag: 'ðŸ‡²ðŸ‡¨', title: 'Standard 2â‚¬ - Prince Albert II', icon: 'user', description: 'Features the effigy of H.S.H. Prince Albert II of Monaco.' },
            { id: 'reg-nl', type: 'Regular', year: 'Standard', country: 'Netherlands', inscription: 'NEDERLAND', flag: 'ðŸ‡³ðŸ‡±', title: 'Standard 2â‚¬ - King Willem-Alexander', icon: 'user', description: 'Features the stylized portrait of King Willem-Alexander, composed of faceted planes.' },
            { id: 'reg-pt', type: 'Regular', year: 'Standard', country: 'Portugal', inscription: 'PORTUGAL', flag: 'ðŸ‡µðŸ‡¹', title: 'Standard 2â‚¬ - Royal Seals', icon: 'landmark', description: 'Features the royal seal of 1144 belonging to Afonso Henriques, the first King of Portugal, surrounded by seven castles and five escutcheons.' },
            { id: 'reg-sm', type: 'Regular', year: 'Standard', country: 'San Marino', inscription: 'SAN MARINO', flag: 'ðŸ‡¸ðŸ‡²', title: 'Standard 2â‚¬ - Saint Marinus', icon: 'user', description: 'Features a portrait of Saint Marinus, the founder of the Republic, based on a painting by Giovan Battista Urbinelli.' },
            { id: 'reg-sk', type: 'Regular', year: 'Standard', country: 'Slovakia', inscription: 'SLOVENSKO', flag: 'ðŸ‡¸ðŸ‡°', title: 'Standard 2â‚¬ - Double Cross on Hills', icon: 'landmark', description: 'Features a double cross elevated on three hills, identical to the national coat of arms of Slovakia.' },
            { id: 'reg-si', type: 'Regular', year: 'Standard', country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: 'Standard 2â‚¬ - France PreÅ¡eren', icon: 'user', description: 'Features a profile of Sloveniaâ€™s national poet France PreÅ¡eren, alongside a line from his famous poem "Zdravljica" which is the national anthem.' },
            { id: 'reg-es', type: 'Regular', year: 'Standard', country: 'Spain', inscription: 'ESPAÃ‘A', flag: 'ðŸ‡ªðŸ‡¸', title: 'Standard 2â‚¬ - King Felipe VI', icon: 'user', description: 'Features the portrait of His Majesty King Felipe VI of Spain.' },
            { id: 'reg-va', type: 'Regular', year: 'Standard', country: 'Vatican', inscription: 'VATICANO', flag: 'ðŸ‡»ðŸ‡¦', title: 'Standard 2â‚¬ - Pope Francis / Coat of Arms', icon: 'landmark', description: 'Features the coat of arms of the Sovereign of the Vatican City State, Pope Francis.' },

            // SLOVENIAN COMMEMORATIVES
            { id: 'sl-2007-rome', type: 'Commemorative', year: 2007, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '50th Anniversary of the Treaty of Rome', icon: 'book-open', imageUrl: 'https://upload.wikimedia.org/wikipedia/en/thumb/6/64/Slovenia_2_euro_coin_2007.png/200px-Slovenia_2_euro_coin_2007.png', description: 'A joint European issue depicting the Treaty document signed by the six founding countries against a background reminiscent of Michelangelo\'s paving of the Piazza del Campidoglio.' },
            { id: 'sl-2008-trubar', type: 'Commemorative', year: 2008, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '500th Anniversary of PrimoÅ¾ Trubar', icon: 'user', description: 'Features a profile of PrimoÅ¾ Trubar, Protestant reformer and the author of the first printed book in the Slovene language. It includes the inscription "Stati inu obstati" (To stand and withstand).' },
            { id: 'sl-2009-emu', type: 'Commemorative', year: 2009, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '10 Years of Economic and Monetary Union', icon: 'globe', description: 'A joint European issue featuring a primitive stick figure merging into the â‚¬ symbol, conveying the idea of the single currency as a shared European project.' },
            { id: 'sl-2010-botanical', type: 'Commemorative', year: 2010, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '200 Years of the Botanical Garden in Ljubljana', icon: 'map', description: 'Features the RebrinÄevolistna Hladnikovka flower to celebrate 200 years of the Botanical Garden in Ljubljana, the oldest continuously operating cultural, scientific and educational institution in Slovenia.' },
            { id: 'sl-2011-rozman', type: 'Commemorative', year: 2011, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '100th Anniversary of Franc Rozman Stane', icon: 'user', description: 'Features a stylized portrait of Franc Rozman Stane, a Slovenian Partisan commander and national hero, alongside a five-pointed star.' },
            { id: 'sl-2012-euro', type: 'Commemorative', year: 2012, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '10 Years of Euro Cash', icon: 'globe', description: 'A joint European issue commemorating the 10th anniversary of Euro banknotes and coins, showing the Euro symbol at the center of the globe.' },
            { id: 'sl-2013-postojna', type: 'Commemorative', year: 2013, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '800 Years of Postojna Cave Discovery', icon: 'map', description: 'Depicts a stylized spiral representing the intricate subterranean passages of Postojna Cave, marking 800 years since the first known visit to the cave system.' },
            { id: 'sl-2014-barbara', type: 'Commemorative', year: 2014, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '600th Anniversary of Crowning of Barbara of Celje', icon: 'user', description: 'Features a portrait of Barbara of Celje, Queen of Hungary and Bohemia, holding her scepter and surrounded by three stars representing the Counts of Celje.' },
            { id: 'sl-2015-emona', type: 'Commemorative', year: 2015, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '2000 Years of Emona (Ljubljana)', icon: 'building-2', description: 'Shows a composition of geometric shapes and letters forming the word "EMONA" (the ancient Roman settlement that became Ljubljana) along with the Roman numerals for 14 AD.' },
            { id: 'sl-2015-euflag', type: 'Commemorative', year: 2015, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '30 Years of the EU Flag', icon: 'globe', description: 'A joint European issue commemorating the 30th anniversary of the EU flag, depicting twelve stars transforming into human figures embracing the birth of a new Europe.' },
            { id: 'sl-2016-independence', type: 'Commemorative', year: 2016, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '25 Years of Independence', icon: 'landmark', description: 'Features a diagonally etched line from France PreÅ¡eren\'s poem "Zdravljica" to mark the 25th anniversary of Slovenia\'s independence from Yugoslavia.' },
            { id: 'sl-2017-euro10', type: 'Commemorative', year: 2017, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '10 Years of the Euro in Slovenia', icon: 'globe', description: 'Depicts ten flying swallowsâ€”a symbol of spring and renewal in Slovenian folkloreâ€”forming a circle to symbolize the 10th anniversary of adopting the Euro.' },
            { id: 'sl-2018-bees', type: 'Commemorative', year: 2018, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: 'World Bee Day', icon: 'bird', description: 'Features a globe shaped like a honeycomb to celebrate the establishment of the very first UN World Bee Day, an initiative proudly led by Slovenia.' },
            { id: 'sl-2019-uni', type: 'Commemorative', year: 2019, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '100th Anniversary of the University of Ljubljana', icon: 'building-2', description: 'Depicts the central facade of the main building of the University of Ljubljana, with a solid square replacing the letter "O" in the inscription.' },
            { id: 'sl-2020-bohoric', type: 'Commemorative', year: 2020, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '500th Anniversary of Adam BohoriÄ', icon: 'book-open', description: 'Features a multilingual inscription from Adam BohoriÄ\'s grammar book "Arcticae horulae succisivae", celebrating the 500th anniversary of his birth.' },
            { id: 'sl-2021-museum', type: 'Commemorative', year: 2021, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '200th Anniversary of the Provincial Museum of Carniola', icon: 'landmark', description: 'Features an illustration of the Situla from VaÄe, one of the most important archaeological treasures of Slovenia, representing 200 years of the National Museum.' },
            { id: 'sl-2022-plecnik', type: 'Commemorative', year: 2022, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '150th Anniversary of JoÅ¾e PleÄnik', icon: 'building-2', description: 'Depicts a stunning architectural detail from the grand reading room window of the National and University Library in Ljubljana, honoring architect JoÅ¾e PleÄnik.' },
            { id: 'sl-2022-erasmus', type: 'Commemorative', year: 2022, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '35 Years of the Erasmus Programme', icon: 'book-open', description: 'A joint European issue showing a portrait of Erasmus of Rotterdam writing, overlaid with lines linking to different points, celebrating 35 years of the student exchange program.' },
            { id: 'sl-2023-plemelj', type: 'Commemorative', year: 2023, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '150th Anniversary of Josip Plemelj', icon: 'user', description: 'Features an equation and graphic shapes representing the mathematical work of Josip Plemelj, the first Chancellor of the University of Ljubljana.' },
            { id: 'sl-2024-library', type: 'Commemorative', year: 2024, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '250th anniversary of the National Library', icon: 'book-open', description: 'Commemorates the 250th anniversary of the National and University Library (NUK), a cornerstone of Slovenian knowledge and cultural heritage.' },
            { id: 'sl-2025-miki', type: 'Commemorative', year: 2025, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '100th Birthday of Miki Muster', icon: 'user', description: 'Celebrates the 100th birthday of Miki Muster, the pioneering Slovenian animator, illustrator, and comic book artist beloved by generations.' },
            { id: 'sl-2026-cankar', type: 'Commemorative', year: 2026, country: 'Slovenia', inscription: 'SLOVENIJA', flag: 'ðŸ‡¸ðŸ‡®', title: '150th anniversary of the birth of Ivan Cankar', icon: 'book-open', description: 'Honors the 150th anniversary of the birth of Ivan Cankar, a celebrated Slovenian writer, playwright, and political activist who deeply influenced national literature.' }
        ];

        // --- 2. STATE MANAGEMENT & LOCAL STORAGE ---
        let collectedCoins = new Set();
        let searchQuery = "";
        let statusFilter = "All";

        // Load from browser storage
        const savedData = localStorage.getItem('euro-collection');
        if (savedData) {
            try {
                const parsed = JSON.parse(savedData);
                collectedCoins = new Set(parsed);
            } catch (e) { console.error("Could not load data"); }
        }

        // Save to browser storage
        function saveToLocal() {
            localStorage.setItem('euro-collection', JSON.stringify(Array.from(collectedCoins)));
        }

        // Toggle coin collected state
        function toggleCoin(id) {
            if (collectedCoins.has(id)) {
                collectedCoins.delete(id);
            } else {
                collectedCoins.add(id);
            }
            saveToLocal();
            renderApp();
        }

        // Reset progress
        function resetCollection() {
            if (confirm("Are you sure you want to reset your entire collection?")) {
                collectedCoins.clear();
                saveToLocal();
                renderApp();
            }
        }

        // --- MODAL LOGIC FOR COIN DESCRIPTIONS ---
        let currentModalCoinId = null;

        function openModal(id) {
            currentModalCoinId = id;
            const coin = COINS.find(c => c.id === id);
            const isCollected = collectedCoins.has(id);
            
            // Populate Modal Content
            document.getElementById('modal-title').innerText = coin.title;
            document.getElementById('modal-country').innerHTML = `<span class="text-xl">${coin.flag}</span> ${coin.country}`;
            document.getElementById('modal-badge').innerText = coin.type === 'Regular' ? 'Standard Issue' : `Commemorative Â· ${coin.year}`;
            document.getElementById('modal-description').innerText = coin.description;

            // Populate Modal Graphic
            const graphicHTML = coin.imageUrl 
                ? `<div class="w-full h-full rounded-full overflow-hidden border-[4px] border-[#cbd5e1] shadow-[inset_0_0_15px_rgba(0,0,0,0.4)] relative bg-[#cbd5e1]">
                     <img src="${coin.imageUrl}" alt="${coin.title}" class="w-full h-full object-cover mix-blend-multiply opacity-90" />
                     <div class="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"></div>
                   </div>`
                : getCoinSVG(coin);
            document.getElementById('modal-graphic').innerHTML = graphicHTML;

            // Sync Button State
            updateModalButton(isCollected);

            // Trigger Display & Animations
            const modal = document.getElementById('coin-modal');
            const content = document.getElementById('coin-modal-content');
            modal.classList.remove('hidden');
            
            lucide.createIcons(); // Process injected icons

            // Wait a micro-tick for the browser to render 'display:block' before animating opacity
            requestAnimationFrame(() => {
                modal.classList.remove('opacity-0');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            });
        }

        function closeModal() {
            const modal = document.getElementById('coin-modal');
            const content = document.getElementById('coin-modal-content');
            
            // Reverse animation
            modal.classList.add('opacity-0');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            
            // Hide element after animation finishes
            setTimeout(() => {
                modal.classList.add('hidden');
                currentModalCoinId = null;
            }, 300);
        }

        // Handles toggling while inside the detail modal
        function toggleFromModal() {
            if (!currentModalCoinId) return;
            toggleCoin(currentModalCoinId);
            updateModalButton(collectedCoins.has(currentModalCoinId));
        }

        // Visually updates the big button in the modal
        function updateModalButton(isCollected) {
            const btn = document.getElementById('modal-toggle-btn');
            if (isCollected) {
                btn.className = "w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-md text-lg bg-green-100 text-green-700 hover:bg-green-200";
                btn.innerHTML = `<i data-lucide="check-circle" class="w-6 h-6"></i> Collected`;
            } else {
                btn.className = "w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-md text-lg bg-slate-900 text-white hover:bg-slate-800 hover:-translate-y-1";
                btn.innerHTML = `<i data-lucide="plus-circle" class="w-6 h-6"></i> Mark as Collected`;
            }
            lucide.createIcons();
        }

        // --- 3. RENDERING SVG COIN (Fallback when no image) ---
        function getCoinSVG(coin) {
            return `
                <div class="relative w-full h-full">
                    <svg viewBox="0 0 100 100" class="absolute inset-0 w-full h-full drop-shadow-md z-0">
                        <defs>
                            <radialGradient id="gold-${coin.id}" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" stop-color="#fef08a" />
                                <stop offset="100%" stop-color="#eab308" />
                            </radialGradient>
                            <radialGradient id="silver-${coin.id}" cx="50%" cy="50%" r="50%">
                                <stop offset="70%" stop-color="#f1f5f9" />
                                <stop offset="100%" stop-color="#cbd5e1" />
                            </radialGradient>
                            <path id="star-${coin.id}" d="M0,-3 L0.9,-0.9 L3,-0.9 L1.3,0.5 L1.9,3 L0,1.5 L-1.9,3 L-1.3,0.5 L-3,-0.9 L-0.9,-0.9 Z" fill="#94a3b8"/>
                        </defs>
                        <circle cx="50" cy="50" r="48" fill="url(#silver-${coin.id})" stroke="#94a3b8" stroke-width="1"/>
                        <circle cx="50" cy="50" r="35" fill="url(#gold-${coin.id})" stroke="#ca8a04" stroke-width="0.5"/>
                        <g transform="translate(50,50)">
                            ${[0, 30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330].map(angle => 
                                `<use href="#star-${coin.id}" transform="rotate(${angle}) translate(0,-41.5)" />`
                            ).join('')}
                        </g>
                        <g transform="translate(50,50)">
                            <text x="0" y="15" text-anchor="middle" font-size="9" font-weight="bold" fill="#854d0e">${coin.year}</text>
                            <text x="0" y="25" text-anchor="middle" font-size="${coin.inscription.length > 7 ? 4.5 : 6}" font-weight="bold" fill="#854d0e" letter-spacing="0.5">${coin.inscription}</text>
                        </g>
                    </svg>
                    
                    <!-- HTML Icon layered securely on top of the SVG -->
                    <div class="absolute inset-0 z-10 flex items-center justify-center pointer-events-none" style="padding-bottom: 22%;">
                        <i data-lucide="${coin.icon}" class="w-[32%] h-[32%] text-yellow-800 opacity-90" stroke-width="1.5"></i>
                    </div>
                </div>
            `;
        }

        // --- 4. BUILD COIN CARDS ---
        function generateCoinHTML(coin) {
            const isCollected = collectedCoins.has(coin.id);
            
            // Build classes based on state
            const cardClass = isCollected 
                ? 'bg-gradient-to-br from-white to-green-50 border-green-400 shadow-green-200/50' 
                : 'bg-white border-slate-100 shadow-md hover:border-blue-300';
                
            const imageWrapperClass = isCollected
                ? 'scale-100 drop-shadow-xl'
                : 'scale-90 opacity-85 group-hover:scale-100 group-hover:opacity-100 drop-shadow-md';

            // Checkmark or Empty Circle
            const iconHTML = isCollected
                ? `<i data-lucide="check-circle" class="text-green-500 fill-green-100 drop-shadow-sm w-7 h-7"></i>`
                : `<i data-lucide="circle" class="text-slate-200 group-hover:text-blue-300 transition-colors w-7 h-7"></i>`;

            // Inner coin graphic (Real Photo or SVG)
            const graphicHTML = coin.imageUrl 
                ? `<div class="w-[92%] h-[92%] rounded-full overflow-hidden border-[4px] border-[#cbd5e1] shadow-[inset_0_0_15px_rgba(0,0,0,0.4)] relative bg-[#cbd5e1]">
                     <img src="${coin.imageUrl}" alt="${coin.title}" class="w-full h-full object-cover mix-blend-multiply opacity-90" />
                     <div class="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"></div>
                   </div>`
                : getCoinSVG(coin);

            const yearLabel = coin.type === 'Regular' ? 'Standard Issue' : coin.year;

            return `
                <div onclick="openModal('${coin.id}')" class="coin-card group relative rounded-2xl p-4 cursor-pointer border-2 flex flex-col select-none ${cardClass}">
                    
                    <!-- Quick Toggle (Uses stopPropagation to prevent modal from opening when you just want to check it off) -->
                    <div onclick="event.stopPropagation(); toggleCoin('${coin.id}')" class="absolute top-3 right-3 z-10 transition-transform duration-300 active:scale-75 hover:scale-110">
                        ${iconHTML}
                    </div>

                    <div class="w-full aspect-square mb-4 transition-all duration-500 pointer-events-none flex items-center justify-center relative ${imageWrapperClass}">
                        ${graphicHTML}
                    </div>

                    <div class="mt-auto flex flex-col items-center text-center px-1">
                        <div class="text-[10px] font-bold text-slate-400 mb-1 uppercase tracking-widest">${yearLabel}</div>
                        <h3 class="text-xs sm:text-sm font-bold text-slate-800 line-clamp-2 leading-tight mb-3 flex-1 min-h-[2rem]" title="${coin.title}">${coin.title}</h3>
                        
                        <div class="w-full flex justify-between items-center bg-slate-50 px-2 py-1.5 rounded-lg border border-slate-100 group-hover:bg-blue-50 transition-colors">
                            <div class="flex items-center gap-1.5 text-xs font-semibold text-slate-600">
                                <span class="text-base">${coin.flag}</span>
                                <span class="hidden sm:inline">${coin.country}</span>
                                <span class="sm:hidden">${coin.country.substring(0, 3).toUpperCase()}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- 5. RENDER THE WHOLE APP ---
        function renderApp() {
            // Filter logic
            const filteredCoins = COINS.filter(coin => {
                const matchesSearch = coin.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                      coin.country.toLowerCase().includes(searchQuery.toLowerCase());
                const isCollected = collectedCoins.has(coin.id);
                const matchesStatus = statusFilter === 'All' ? true : 
                                      (statusFilter === 'Collected' ? isCollected : !isCollected);
                return matchesSearch && matchesStatus;
            });

            const regularFiltered = filteredCoins.filter(c => c.type === 'Regular');
            const slovenianFiltered = filteredCoins.filter(c => c.type === 'Commemorative');

            // Render Grids
            document.getElementById('regular-coins-grid').innerHTML = regularFiltered.length > 0 
                ? regularFiltered.map(generateCoinHTML).join('')
                : '<div class="col-span-full text-center py-8 text-slate-400 font-medium border border-dashed border-slate-200 rounded-xl">No regular coins found.</div>';
            
            document.getElementById('slovenian-coins-grid').innerHTML = slovenianFiltered.length > 0 
                ? slovenianFiltered.map(generateCoinHTML).join('')
                : '<div class="col-span-full text-center py-8 text-slate-400 font-medium border border-dashed border-slate-200 rounded-xl">No Slovenian coins found.</div>';

            // Calculate Stats
            const regTotal = COINS.filter(c => c.type === 'Regular').length;
            const regCollected = COINS.filter(c => c.type === 'Regular' && collectedCoins.has(c.id)).length;
            const regPercent = Math.round((regCollected / regTotal) * 100);

            const slTotal = COINS.filter(c => c.type === 'Commemorative').length;
            const slCollected = COINS.filter(c => c.type === 'Commemorative' && collectedCoins.has(c.id)).length;
            const slPercent = Math.round((slCollected / slTotal) * 100);

            // Update DOM Stats
            document.getElementById('reg-collected').innerText = regCollected;
            document.getElementById('reg-total').innerText = regTotal;
            document.getElementById('reg-bar').style.width = `${regPercent}%`;
            
            document.getElementById('sl-collected').innerText = slCollected;
            document.getElementById('sl-total').innerText = slTotal;
            
            // Update Total Money Value
            const totalValue = (regCollected + slCollected) * 2;
            document.getElementById('total-value').innerText = `â‚¬${totalValue}.00`;

            // Split Slovenian progress bar into 3 parts (White, Blue, Red)
            document.getElementById('sl-bar-white').style.width = `${slPercent / 3}%`;
            document.getElementById('sl-bar-blue').style.width = `${slPercent / 3}%`;
            document.getElementById('sl-bar-red').style.width = `${slPercent / 3}%`;

            // Trophies and badges
            document.getElementById('reg-award').classList.toggle('hidden', regPercent !== 100);
            document.getElementById('reg-complete-badge').classList.toggle('hidden', regPercent !== 100);
            
            document.getElementById('sl-award').classList.toggle('hidden', slPercent !== 100);
            document.getElementById('sl-complete-badge').classList.toggle('hidden', slPercent !== 100);

            // Re-initialize icons since we injected new HTML strings
            lucide.createIcons();
        }

        // --- 6. EVENT LISTENERS ---
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderApp();
        });

        document.getElementById('statusFilter').addEventListener('change', (e) => {
            statusFilter = e.target.value;
            renderApp();
        });

        // Start the app on load
        window.onload = renderApp;

    </script>

    <!-- Modal HTML Structure (Hidden by default) -->
    <div id="coin-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300" onclick="if(event.target === this) closeModal()">
        <div class="bg-white rounded-[2rem] p-6 sm:p-8 max-w-md w-full mx-4 relative shadow-2xl transform scale-95 transition-transform duration-300" id="coin-modal-content">
            <!-- Close Button -->
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-800 bg-slate-100 hover:bg-slate-200 rounded-full p-2 transition-colors z-10">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
            
            <!-- Graphic -->
            <div id="modal-graphic" class="w-32 h-32 mx-auto mb-6 relative pointer-events-none"></div>
            
            <!-- Details -->
            <div class="text-center">
                <div id="modal-badge" class="inline-block px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-[10px] font-bold tracking-widest mb-3 uppercase"></div>
                <h2 id="modal-title" class="text-2xl font-black text-slate-800 leading-tight mb-2"></h2>
                <div id="modal-country" class="text-sm font-semibold text-slate-500 mb-6 flex items-center justify-center gap-2"></div>
                
                <!-- Description Box -->
                <div class="bg-slate-50 rounded-2xl p-5 text-left border border-slate-100 mb-6 shadow-inner">
                    <h4 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 flex items-center gap-1">
                        <i data-lucide="info" class="w-3 h-3"></i> Official Description
                    </h4>
                    <p id="modal-description" class="text-slate-700 text-sm leading-relaxed font-medium"></p>
                </div>
                
                <!-- Action Button -->
                <button id="modal-toggle-btn" onclick="toggleFromModal()" class="w-full"></button>
            </div>
        </div>
    </div>

</body>
</html>
